# 📋 管理后台 - 网站前端配置功能规划

> 基于前端代码分析，规划后台管理系统可配置的前端元素

---

## 🎯 配置分类总览

| 分类 | 配置项数量 | 优先级 | 说明 |
|------|-----------|--------|------|
| 品牌信息 | 6 项 | 🔴 高 | 网站名称、Logo、Slogan |
| AI 助手 | 6 项 | 🔴 高 | Mu AI 名称、人设、提示词 |
| 视觉资源 | 5 项 | 🔴 高 | 背景图、看板娘、默认头像 |
| 首页内容 | 4 项 | 🟡 中 | 介绍文案、世界观设定 |
| 社交链接 | 5 项 | 🟡 中 | Instagram、网易云等外链 |
| 系统公告 | 3 项 | 🟡 中 | 公告标题、内容、类型 |
| 项目模块 | 动态 | 🟢 低 | L Converter 等项目介绍 |

---

## 🔴 高优先级配置项

### 1. 品牌信息配置

| 配置项 | 字段名 | 类型 | 前端使用位置 | 说明 |
|--------|--------|------|--------------|------|
| 网站名称(英) | `site_name` | string | NavBar Logo 旁、页面标题 | 如 "LETAVERSE" |
| 网站名称(中) | `site_name_cn` | string | 首页 Hero 区 | 如 "莱塔宇宙" |
| 社区名称(英) | `community_name` | string | 首页社区介绍区 | 如 "Lightning Community" |
| 社区名称(中) | `community_name_cn` | string | 首页社区介绍区 | 如 "闪电社区" |
| 品牌标语(英) | `slogan` | text | 首页 Hero 区 | 哲学性标语 |
| 品牌标语(中) | `slogan_cn` | text | 首页 Hero 区 | 中文标语 |

**后台界面建议**：
```
┌─────────────────────────────────────────────────┐
│ 品牌信息配置                                      │
├─────────────────────────────────────────────────┤
│ 网站名称                                         │
│ ┌──────────────────┐ ┌──────────────────┐       │
│ │ LETAVERSE        │ │ 莱塔宇宙          │       │
│ └──────────────────┘ └──────────────────┘       │
│      英文名称              中文名称              │
│                                                 │
│ 品牌标语                                         │
│ ┌─────────────────────────────────────────────┐ │
│ │ The soul is infinite, yet bound by...       │ │
│ └─────────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────────┐ │
│ │ 灵魂无限，却受制于肉体的局限。                  │ │
│ └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────┘
```

---

### 2. AI 助手配置 (Mu AI)

| 配置项 | 字段名 | 类型 | 前端使用位置 | 说明 |
|--------|--------|------|--------------|------|
| AI 名称(英) | `ai_name` | string | ChatWidget、MuAI 页面 | 如 "Mu AI" |
| AI 名称(中) | `ai_name_cn` | string | ChatWidget、MuAI 页面 | 如 "穆爱" |
| AI 头衔(英) | `ai_title` | string | ChatWidget 状态栏 | 如 "Central Brain" |
| AI 头衔(中) | `ai_title_cn` | string | ChatWidget 状态栏 | 如 "中枢脑" |
| AI 欢迎语(英) | `ai_greeting` | text | ChatWidget 初始消息 | 首次打开的欢迎语 |
| AI 欢迎语(中) | `ai_greeting_cn` | text | ChatWidget 初始消息 | 中文欢迎语 |
| **AI 系统提示词** | `ai_system_prompt` | text | 后端 AI 接口 | 🔴 **重要** - 定义 AI 人设 |

**AI 系统提示词示例**：
```
你是穆爱 (Mu AI)，LETAVERSE 闪电社区的中枢脑。
你的性格特点：
- 温柔但带有神秘感
- 对 ACG 文化有深入了解
- 说话风格略带科幻感
- 会用一些赛博朋克术语

回复规则：
- 保持简洁，每次回复不超过 100 字
- 适当使用 emoji
- 遇到敏感话题礼貌拒绝
```

**后台界面建议**：
```
┌─────────────────────────────────────────────────┐
│ AI 助手配置                                      │
├─────────────────────────────────────────────────┤
│ 基本信息                                         │
│ ┌──────────────────┐ ┌──────────────────┐       │
│ │ Mu AI            │ │ 穆爱              │       │
│ └──────────────────┘ └──────────────────┘       │
│      英文名称              中文名称              │
│                                                 │
│ AI 人设提示词 (System Prompt)                    │
│ ┌─────────────────────────────────────────────┐ │
│ │ 你是穆爱 (Mu AI)，LETAVERSE 闪电社区的...     │ │
│ │                                             │ │
│ │                                             │ │
│ └─────────────────────────────────────────────┘ │
│ ⚠️ 修改后立即生效，无需重启服务                    │
│                                                 │
│ [测试对话] [保存配置]                             │
└─────────────────────────────────────────────────┘
```

---

### 3. 视觉资源配置

| 配置项 | 字段名 | 类型 | 前端使用位置 | 建议尺寸 |
|--------|--------|------|--------------|----------|
| 网站 Logo | `logo` | image | NavBar 左侧 | 200x200px |
| 网站 Favicon | `favicon` | image | 浏览器标签页 | 32x32px |
| 首页背景图 | `background` | image | Layout 全局背景 | 1920x1080px |
| 首页 Hero 背景 | `hero_background` | image | 首页顶部大图 | 1920x800px |
| AI 看板娘 | `ai_kanban` | image | ChatWidget、首页 | 透明 PNG, 高度 400px |
| 默认用户头像 | `default_avatar` | image | 无头像用户 | 200x200px |

**后台界面建议**：
```
┌─────────────────────────────────────────────────┐
│ 视觉资源配置                                     │
├─────────────────────────────────────────────────┤
│                                                 │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐         │
│  │  Logo   │  │ Favicon │  │ AI看板娘 │         │
│  │  [图片] │  │  [图片] │  │  [图片]  │         │
│  │ 200x200 │  │  32x32  │  │ 透明PNG  │         │
│  └─────────┘  └─────────┘  └─────────┘         │
│   [上传]       [上传]        [上传]             │
│                                                 │
│  背景图片                                        │
│  ┌─────────────────────────────────────────┐   │
│  │                                         │   │
│  │           [当前背景预览]                  │   │
│  │                                         │   │
│  └─────────────────────────────────────────┘   │
│  [上传新背景] [恢复默认]                         │
│                                                 │
└─────────────────────────────────────────────────┘
```

---

## 🟡 中优先级配置项

### 4. 首页内容配置

| 配置项 | 字段名 | 类型 | 前端使用位置 |
|--------|--------|------|--------------|
| 理念介绍(英) | `intro_en` | text | 首页理念区 |
| 理念介绍(中) | `intro_zh` | text | 首页理念区 |
| 世界观设定(英) | `world_background_en` | text | 首页世界观区 |
| 世界观设定(中) | `world_background_zh` | text | 首页世界观区 |

---

### 5. 社交链接配置

| 配置项 | 字段名 | 类型 | 说明 |
|--------|--------|------|------|
| Instagram | `social_instagram` | url | Instagram 主页链接 |
| 网易云音乐 | `social_netease` | url | 网易云音乐主页 |
| Twitter/X | `social_twitter` | url | Twitter 主页 |
| Discord | `social_discord` | url | Discord 服务器邀请链接 |
| 自定义链接 | `social_custom` | json | 支持添加更多链接 |

**JSON 格式示例**：
```json
{
  "social_custom": [
    {
      "name": "Bilibili",
      "name_cn": "哔哩哔哩",
      "url": "https://space.bilibili.com/xxx",
      "icon": "bilibili"
    }
  ]
}
```

---

### 6. 系统公告配置

| 配置项 | 字段名 | 类型 | 说明 |
|--------|--------|------|------|
| 公告标题 | `title` | string | 公告标题 |
| 公告内容 | `content` | text | 公告详细内容 |
| 公告类型 | `type` | enum | info/warning/important |
| 是否启用 | `is_active` | bool | 控制显示/隐藏 |
| 开始时间 | `start_time` | datetime | 定时发布 |
| 结束时间 | `end_time` | datetime | 自动下线 |

---

## 🟢 低优先级配置项

### 7. 项目模块配置

支持动态添加/编辑/删除项目卡片（如 L Converter）

| 配置项 | 字段名 | 类型 |
|--------|--------|------|
| 项目名称(英) | `name` | string |
| 项目名称(中) | `name_cn` | string |
| 项目描述(英) | `description` | text |
| 项目描述(中) | `description_cn` | text |
| 项目图标 | `icon` | string (emoji) |
| 功能标签 | `features` | array |
| 排序权重 | `sort_order` | int |

---

## 📊 配置 API 设计

### 获取配置
```
GET /system/config

Response:
{
  "site_name": "LETAVERSE",
  "site_name_cn": "莱塔宇宙",
  "logo": "/uploads/logo.jpg",
  "background": "/uploads/bg.jpg",
  "ai_name": "Mu AI",
  "ai_system_prompt": "你是穆爱...",
  ...
}
```

### 更新配置 (管理员)
```
PUT /admin/config

Body:
{
  "site_name": "NEW NAME",
  "ai_system_prompt": "新的人设..."
}
```

### 上传资源 (管理员)
```
POST /admin/upload

Body: FormData
- file: 图片文件
- type: logo/favicon/background/kanban/avatar

Response:
{
  "url": "/uploads/logo_20251213.jpg"
}
```

---

## 🖥️ 后台管理界面结构建议

```
管理后台
├── 仪表盘
├── 内容管理
│   ├── 用户管理
│   ├── 动态管理
│   ├── 评论管理
│   └── 分类管理
├── 网站配置 ⭐ 新增
│   ├── 品牌信息
│   ├── AI 助手设置
│   ├── 视觉资源
│   ├── 首页内容
│   ├── 社交链接
│   └── 系统公告
├── 数据统计
└── 系统设置
```

---

## ✅ 实现优先级建议

### 第一阶段 (V2.4)
1. ✅ 品牌信息配置 (site_name, logo, slogan)
2. ✅ AI 系统提示词配置 (ai_system_prompt)
3. ✅ 视觉资源上传 (logo, background, kanban)

### 第二阶段 (V2.5)
4. 首页内容配置
5. 社交链接配置
6. 系统公告管理

### 第三阶段 (V2.6)
7. 项目模块动态配置
8. 主题色配置
9. 导航标签自定义

---

## 📝 前端适配说明

前端已通过 `SiteConfigContext` 支持动态配置：

```typescript
// 使用示例
const { config } = useSiteConfig();

// 获取网站名称
<span>{config.siteName}</span>

// 获取 Logo
<img src={config.logo} />

// 获取 AI 名称
<span>{config.aiName}</span>
```

**需要后端配合**：
1. `/system/config` API 返回完整配置
2. 管理后台提供配置编辑界面
3. 图片上传接口返回可访问的 URL

---

---

## 🔄 V2.6.1 前端更新后的配置调整建议 (2025-12-14)

### 需要后端配合修改的配置项

#### 1. AI 立绘配置调整

**变更说明**: 社区页面已移除 AI 立绘按钮，AI 立绘现在仅在以下位置使用：
- 首页 Hero 区域
- ChatWidget 悬浮聊天窗口
- Mu AI 专属页面

**建议**:
- 后台 `ai_kanban` 配置保持不变
- 可考虑添加 `ai_kanban_mini` 字段用于 ChatWidget 小图标（可选）

#### 2. 社区页面配置

**新增建议配置项**:

| 配置项 | 字段名 | 类型 | 说明 |
|--------|--------|------|------|
| 发帖按钮文案(英) | `create_post_text` | string | 默认 "Create Post" |
| 发帖按钮文案(中) | `create_post_text_cn` | string | 默认 "上传记忆碎片" |
| 社区状态栏文案 | `community_status_text` | string | 默认 "SYSTEM: L-CONVERTER ONLINE" |
| 社区版本号 | `community_version` | string | 默认 "V2.0.45 BETA" |

#### 3. 移除的配置项

以下配置项在社区页面已不再使用，可考虑标记为废弃或移除：

| 配置项 | 原用途 | 状态 |
|--------|--------|------|
| `community_ai_button_enabled` | 社区页 AI 立绘按钮开关 | 🔴 已废弃 |
| `community_ai_tooltip` | 社区页 AI 按钮提示语 | 🔴 已废弃 |

---

### 后端 API 更新建议

#### `/system/config` 返回格式更新

```json
{
  // ... 现有字段 ...
  
  // 新增社区配置
  "community": {
    "status_text": "SYSTEM: L-CONVERTER ONLINE",
    "version": "V2.0.45 BETA",
    "create_post_text": "Create Post",
    "create_post_text_cn": "上传记忆碎片"
  },
  
  // AI 配置保持不变
  "ai": {
    "name": "Mu AI",
    "name_cn": "穆爱",
    "title": "Central Brain",
    "title_cn": "中枢脑",
    "greeting": "Hello~ I'm Mu ✨",
    "greeting_cn": "你好呀～我是穆爱 ✨"
  }
}
```

---

### 后台管理界面更新建议

#### 社区设置面板 (新增)

```
┌─────────────────────────────────────────────────┐
│ 社区页面配置                                     │
├─────────────────────────────────────────────────┤
│                                                 │
│ 状态栏设置                                       │
│ ┌─────────────────────────────────────────────┐ │
│ │ SYSTEM: L-CONVERTER ONLINE                  │ │
│ └─────────────────────────────────────────────┘ │
│ 版本号: ┌──────────────┐                        │
│         │ V2.0.45 BETA │                        │
│         └──────────────┘                        │
│                                                 │
│ 发帖按钮文案                                     │
│ ┌──────────────────┐ ┌──────────────────┐       │
│ │ Create Post      │ │ 上传记忆碎片      │       │
│ └──────────────────┘ └──────────────────┘       │
│      英文                  中文                  │
│                                                 │
│ [保存配置]                                       │
└─────────────────────────────────────────────────┘
```

#### AI 助手设置面板 (更新说明)

```
┌─────────────────────────────────────────────────┐
│ AI 助手配置                                      │
├─────────────────────────────────────────────────┤
│                                                 │
│ ℹ️ AI 立绘显示位置说明:                          │
│ • 首页 Hero 区域 ✅                              │
│ • 悬浮聊天窗口 ✅                                │
│ • Mu AI 专属页面 ✅                              │
│ • 社区页面 ❌ (已移除)                           │
│                                                 │
│ AI 看板娘图片                                    │
│ ┌─────────┐                                     │
│ │  [图片] │  建议尺寸: 透明 PNG, 高度 400px      │
│ └─────────┘                                     │
│ [上传新图片]                                     │
│                                                 │
└─────────────────────────────────────────────────┘
```

---

### 前端已完成的适配

| 功能 | 状态 | 说明 |
|------|------|------|
| 社区页 AI 按钮移除 | ✅ 完成 | 不再显示 AI 立绘入口 |
| 发帖按钮位置调整 | ✅ 完成 | 移至右下角 |
| 发帖按钮智能隐藏 | ✅ 完成 | 模态框打开时隐藏 |
| ngrok 外网支持 | ✅ 完成 | vite.config.ts 已配置 |
| 国际化补全 | ✅ 完成 | report/banned/rate_limit |

---

**文档版本**: V1.1  
**更新日期**: 2025-12-14  
**作者**: Kiro AI
