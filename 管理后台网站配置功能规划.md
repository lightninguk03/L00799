# 📋 管理后台 - 网站前端配置功能规划

> 基于前端代码分析，规划后台管理系统可配置的前端元素
> 
> **文档版本**: V2.0  
> **更新日期**: 2025-12-15  
> **作者**: Kiro AI

---

## 🎯 核心结论

### Logo 图片需求
**只需要 1 个 Logo 图片**，前端用 CSS 控制尺寸，不需要多个不同尺寸的 Logo。

---

## 📊 后端 API 配置字段清单

### `GET /system/config` 完整返回格式

```json
{
  // ========== 品牌信息 (文字) ==========
  "site_name": "LETAVERSE",           // 网站英文名 (必需)
  "site_name_cn": "莱塔宇宙",          // 网站中文名 (必需)
  "community_name": "Lightning Community",  // 社区英文名 (可选)
  "community_name_cn": "闪电社区",     // 社区中文名 (可选)
  "slogan": "The soul is infinite...", // 英文标语 (可选)
  "slogan_cn": "灵魂无限...",          // 中文标语 (可选)

  // ========== 视觉资源 (图片) ==========
  "logo": "/uploads/images/logo.png",           // Logo (必需，只需1个)
  "favicon": "/uploads/images/favicon.ico",     // 浏览器标签图标 (可选)
  "background": "/uploads/images/bg.jpg",       // 全局背景图 (可选)
  "hero_background": "/uploads/images/hero.jpg", // 首页 Hero 区背景 (可选)
  "ai_kanban": "/uploads/images/kanban.png",    // AI 看板娘立绘 (可选)
  "default_avatar": "/uploads/images/avatar.png", // 默认用户头像 (可选)

  // ========== AI 助手配置 ==========
  "ai": {
    "name": "Mu AI",           // AI 英文名 (可选)
    "name_cn": "穆爱",          // AI 中文名 (可选)
    "title": "Central Brain",  // AI 英文头衔 (可选)
    "title_cn": "中枢脑",       // AI 中文头衔 (可选)
    "greeting": "Hello~ I'm Mu ✨",      // AI 英文欢迎语 (可选)
    "greeting_cn": "你好呀～我是穆爱 ✨"  // AI 中文欢迎语 (可选)
  },

  // ========== 社交链接 (可选) ==========
  "social_links": [
    { "name": "Instagram", "url": "https://...", "icon": "instagram" },
    { "name": "Bilibili", "url": "https://...", "icon": "bilibili" },
    { "name": "Discord", "url": "https://...", "icon": "discord" },
    { "name": "Twitter", "url": "https://...", "icon": "twitter" },
    { "name": "GitHub", "url": "https://...", "icon": "github" },
    { "name": "网易云音乐", "url": "https://...", "icon": "netease" }
  ],

  // ========== 功能开关 (可选) ==========
  "features": {
    "ai_chat": true,        // 是否启用 AI 聊天
    "registration": true,   // 是否开放注册
    "email_verify": true    // 是否需要邮箱验证
  },

  // ========== 首页内容 (可选，用于世界观介绍) ==========
  "intro": {
    "en": "From the Lightning Community...",
    "zh": "来自闪电社区..."
  },
  "world_background": {
    "en": "In a future timeline...",
    "zh": "在未来的时间线中..."
  }
}
```

---

## 📁 图片资源汇总

| 字段名 | 用途 | 建议尺寸 | 必需 | 前端使用位置 |
|--------|------|----------|------|--------------|
| `logo` | 导航栏 Logo | 任意尺寸，CSS 控制 (高度 40px) | ✅ 是 | NavBar |
| `favicon` | 浏览器标签图标 | 32x32 或 64x64 | ❌ 可选 | 浏览器标签 |
| `background` | 全局背景图 | 1920x1080 或更大 | ❌ 可选 | Layout 全局 |
| `hero_background` | 首页 Hero 背景 | 1920x1080 或更大 | ❌ 可选 | 首页顶部 |
| `ai_kanban` | AI 看板娘立绘 | 透明 PNG，高度 600px+ | ❌ 可选 | ChatWidget、首页、MuAI 页 |
| `default_avatar` | 默认用户头像 | 200x200 | ❌ 可选 | 无头像用户 |

---

## 📝 文字配置汇总

| 字段名 | 用途 | 必需 | 前端使用位置 |
|--------|------|------|--------------|
| `site_name` | 网站英文名 | ✅ 是 | NavBar、页面标题 |
| `site_name_cn` | 网站中文名 | ✅ 是 | 首页 Hero |
| `community_name` | 社区英文名 | ❌ 可选 | 首页介绍区 |
| `community_name_cn` | 社区中文名 | ❌ 可选 | 首页介绍区 |
| `slogan` | 英文标语 | ❌ 可选 | 首页 Hero |
| `slogan_cn` | 中文标语 | ❌ 可选 | 首页 Hero |
| `ai.name` | AI 英文名 | ❌ 可选 | ChatWidget、MuAI 页 |
| `ai.name_cn` | AI 中文名 | ❌ 可选 | ChatWidget、MuAI 页 |
| `ai.title` | AI 英文头衔 | ❌ 可选 | ChatWidget |
| `ai.title_cn` | AI 中文头衔 | ❌ 可选 | ChatWidget |
| `ai.greeting` | AI 英文欢迎语 | ❌ 可选 | ChatWidget 初始消息 |
| `ai.greeting_cn` | AI 中文欢迎语 | ❌ 可选 | ChatWidget 初始消息 |

---

## 🖥️ 后台管理界面建议

### 模块划分

```
网站配置
├── 1. 品牌设置 (必需)
│   ├── 网站名称 (中/英)
│   ├── 社区名称 (中/英)
│   ├── 品牌标语 (中/英)
│   └── Logo 上传
│
├── 2. 视觉资源 (可选)
│   ├── 全局背景图
│   ├── 首页 Hero 背景
│   ├── AI 看板娘图片
│   ├── 默认头像
│   └── Favicon
│
├── 3. AI 助手设置 (可选)
│   ├── AI 名称 (中/英)
│   ├── AI 头衔 (中/英)
│   ├── AI 欢迎语 (中/英)
│   └── AI 系统提示词 (后端使用)
│
├── 4. 社交链接 (可选)
│   └── 可添加/删除/排序的链接列表
│
└── 5. 功能开关 (可选)
    ├── AI 聊天开关
    ├── 注册开关
    └── 邮箱验证开关
```

---

### 界面原型

#### 1. 品牌设置面板

```
┌─────────────────────────────────────────────────────────────┐
│ 品牌设置                                                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ Logo 上传                                                    │
│ ┌─────────┐                                                 │
│ │  [图片] │  ← 当前 Logo 预览                                │
│ │         │  建议: 任意尺寸，前端自动适配                      │
│ └─────────┘                                                 │
│ [上传新 Logo]                                                │
│                                                             │
│ ─────────────────────────────────────────────────────────── │
│                                                             │
│ 网站名称                                                     │
│ ┌────────────────────┐  ┌────────────────────┐              │
│ │ LETAVERSE          │  │ 莱塔宇宙            │              │
│ └────────────────────┘  └────────────────────┘              │
│       英文名称                  中文名称                      │
│                                                             │
│ 社区名称                                                     │
│ ┌────────────────────┐  ┌────────────────────┐              │
│ │ Lightning Community│  │ 闪电社区            │              │
│ └────────────────────┘  └────────────────────┘              │
│       英文名称                  中文名称                      │
│                                                             │
│ 品牌标语                                                     │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ The soul is infinite, yet bound by the limits of flesh. │ │
│ └─────────────────────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 灵魂无限，却受制于肉体的局限。                             │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│                                          [保存] [重置默认]   │
└─────────────────────────────────────────────────────────────┘
```

#### 2. 视觉资源面板

```
┌─────────────────────────────────────────────────────────────┐
│ 视觉资源                                                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ ┌─────────────┐  ┌─────────────┐  ┌─────────────┐          │
│ │  全局背景    │  │ Hero 背景   │  │ AI 看板娘   │          │
│ │   [图片]    │  │   [图片]    │  │   [图片]    │          │
│ │ 1920x1080   │  │ 1920x1080   │  │ 透明 PNG    │          │
│ └─────────────┘  └─────────────┘  └─────────────┘          │
│    [上传]           [上传]           [上传]                 │
│                                                             │
│ ┌─────────────┐  ┌─────────────┐                           │
│ │  默认头像    │  │  Favicon    │                           │
│ │   [图片]    │  │   [图片]    │                           │
│ │  200x200    │  │   32x32     │                           │
│ └─────────────┘  └─────────────┘                           │
│    [上传]           [上传]                                  │
│                                                             │
│ ℹ️ 提示: 所有图片上传后立即生效，无需重启服务                  │
│                                                             │
│                                          [保存] [重置默认]   │
└─────────────────────────────────────────────────────────────┘
```

#### 3. AI 助手设置面板

```
┌─────────────────────────────────────────────────────────────┐
│ AI 助手设置                                                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ AI 名称                                                      │
│ ┌────────────────────┐  ┌────────────────────┐              │
│ │ Mu AI              │  │ 穆爱                │              │
│ └────────────────────┘  └────────────────────┘              │
│       英文名称                  中文名称                      │
│                                                             │
│ AI 头衔                                                      │
│ ┌────────────────────┐  ┌────────────────────┐              │
│ │ Central Brain      │  │ 中枢脑              │              │
│ └────────────────────┘  └────────────────────┘              │
│       英文头衔                  中文头衔                      │
│                                                             │
│ AI 欢迎语                                                    │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ Hello~ I'm Mu ✨ How can I assist you today?            │ │
│ └─────────────────────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 你好呀～我是穆爱 ✨ 有什么我可以帮助你的吗？               │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ ─────────────────────────────────────────────────────────── │
│                                                             │
│ AI 系统提示词 (System Prompt) - 定义 AI 人设                 │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 你是穆爱 (Mu AI)，LETAVERSE 闪电社区的中枢脑。            │ │
│ │ 你的性格特点：                                           │ │
│ │ - 温柔但带有神秘感                                       │ │
│ │ - 对 ACG 文化有深入了解                                  │ │
│ │ - 说话风格略带科幻感                                     │ │
│ │ ...                                                     │ │
│ └─────────────────────────────────────────────────────────┘ │
│ ⚠️ 修改后立即生效，影响 AI 对话风格                          │
│                                                             │
│ ℹ️ AI 立绘显示位置: 首页 Hero、悬浮聊天窗口、Mu AI 页面       │
│                                                             │
│                                 [测试对话] [保存] [重置默认]  │
└─────────────────────────────────────────────────────────────┘
```

#### 4. 社交链接面板

```
┌─────────────────────────────────────────────────────────────┐
│ 社交链接                                                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ ┌───┬────────────┬─────────────────────────────┬─────────┐ │
│ │ ⋮ │ Instagram  │ https://instagram.com/xxx   │ [删除]  │ │
│ ├───┼────────────┼─────────────────────────────┼─────────┤ │
│ │ ⋮ │ Bilibili   │ https://space.bilibili.com/ │ [删除]  │ │
│ ├───┼────────────┼─────────────────────────────┼─────────┤ │
│ │ ⋮ │ Discord    │ https://discord.gg/xxx      │ [删除]  │ │
│ ├───┼────────────┼─────────────────────────────┼─────────┤ │
│ │ ⋮ │ 网易云音乐  │ https://music.163.com/xxx   │ [删除]  │ │
│ └───┴────────────┴─────────────────────────────┴─────────┘ │
│                                                             │
│ [+ 添加链接]                                                 │
│                                                             │
│ ℹ️ 拖拽 ⋮ 图标可调整显示顺序                                  │
│                                                             │
│                                          [保存] [重置默认]   │
└─────────────────────────────────────────────────────────────┘
```

#### 5. 功能开关面板

```
┌─────────────────────────────────────────────────────────────┐
│ 功能开关                                                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ AI 聊天功能                                    [开关 ✓] │ │
│ │ 启用后用户可以与 AI 助手对话                              │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 用户注册                                       [开关 ✓] │ │
│ │ 关闭后新用户无法注册账号                                  │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 邮箱验证                                       [开关 ✓] │ │
│ │ 启用后用户注册需要验证邮箱                                │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│                                                    [保存]   │
└─────────────────────────────────────────────────────────────┘
```

---

## 🔌 后端 API 设计

### 1. 获取配置 (公开)
```
GET /system/config

Response: 200 OK
{
  "site_name": "LETAVERSE",
  "site_name_cn": "莱塔宇宙",
  "logo": "/uploads/images/logo.png",
  "ai": { ... },
  ...
}
```

### 2. 更新配置 (管理员)
```
PUT /admin/config

Headers:
  Authorization: Bearer <admin_token>

Body:
{
  "site_name": "NEW NAME",
  "ai": {
    "name": "New AI",
    "greeting": "New greeting..."
  }
}

Response: 200 OK
{
  "message": "配置更新成功",
  "config": { ... }
}
```

### 3. 上传资源 (管理员)
```
POST /admin/upload

Headers:
  Authorization: Bearer <admin_token>
  Content-Type: multipart/form-data

Body:
  file: <图片文件>
  type: logo | favicon | background | hero_background | ai_kanban | default_avatar

Response: 200 OK
{
  "url": "/uploads/images/logo_20251215.png",
  "type": "logo"
}
```

### 4. 删除资源 (管理员)
```
DELETE /admin/upload/{type}

Headers:
  Authorization: Bearer <admin_token>

Response: 200 OK
{
  "message": "资源已删除，已恢复默认"
}
```

---

## ✅ 实现优先级

### 第一阶段 (核心功能)
1. ✅ 品牌信息配置 (site_name, logo, slogan)
2. ✅ AI 配置 (ai.name, ai.greeting, ai_system_prompt)
3. ✅ 视觉资源上传 (logo, background, ai_kanban)

### 第二阶段 (增强功能)
4. ⬜ 社交链接管理
5. ⬜ 功能开关
6. ⬜ 首页内容配置

### 第三阶段 (高级功能)
7. ⬜ 配置版本历史
8. ⬜ 配置导入/导出
9. ⬜ 多主题支持

---

## 📋 前端已完成的适配

前端通过 `SiteConfigContext` 支持动态配置：

```typescript
// 使用示例
const { config } = useSiteConfig();
const { i18n } = useTranslation();
const isZh = i18n.language.startsWith('zh');

// 获取网站名称 (根据语言)
const siteName = isZh ? config.siteNameCn : config.siteName;

// 获取 Logo
import { getMediaUrl } from '../lib/utils';
const logoUrl = getMediaUrl(config.logo);

// 获取 AI 名称
const aiName = isZh ? config.aiNameCn : config.aiName;
```

### 配置自动刷新机制
- 每 5 分钟自动从 `/system/config` 获取最新配置
- 页面切换回来时自动刷新
- 提供 `refreshConfig()` 方法支持手动刷新

---

## 📝 更新日志

### V2.0 (2025-12-15)
- 重新整理配置字段清单
- 明确 Logo 只需要 1 个
- 添加完整的 API 设计
- 添加后台界面原型

### V1.1 (2025-12-14)
- 添加 V2.6.1 前端更新后的配置调整建议
- 社区页面 AI 按钮已移除

### V1.0 (2025-12-13)
- 初始版本
