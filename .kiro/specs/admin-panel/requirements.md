# 需求文档

## 简介

为 Project Neon V2.0 后端添加可视化管理后台，使非技术人员能够轻松管理社区内容、用户和系统配置。采用 SQLAdmin 集成方案，最小化开发成本，快速上线。

## 术语表

- **管理后台**: 提供可视化界面管理数据库内容和网站配置
- **SQLAdmin**: FastAPI 的管理后台库，自动生成 CRUD 界面
- **运营人员**: 负责日常内容管理的非技术人员
- **超级管理员**: 拥有所有权限的管理员

## 需求列表

### 需求 1：用户管理

**用户故事:** 作为运营人员，我希望能够查看和管理用户账户，以便处理用户问题和维护社区秩序。

#### 验收标准

1. 当运营人员访问用户管理页面时，系统应显示分页的用户列表，包含用户名、邮箱、头像和注册日期
2. 当运营人员搜索用户时，系统应支持按用户名或邮箱筛选
3. 当运营人员查看用户详情时，系统应显示该用户的动态数、评论数和互动统计
4. 当运营人员编辑用户时，系统应仅允许修改用户名和头像字段
5. 如果运营人员尝试删除有动态的用户，系统应在执行前警告级联删除的影响

### 需求 2：动态管理

**用户故事:** 作为运营人员，我希望能够管理社区动态，以便审核内容和删除不当材料。

#### 验收标准

1. 当运营人员访问动态管理页面时，系统应显示动态列表，包含内容预览、作者、媒体类型、分类和创建日期
2. 当运营人员筛选动态时，系统应支持按分类、媒体类型和日期范围筛选
3. 当运营人员查看动态详情时，系统应显示完整内容、媒体URL、点赞数、评论数和浏览数
4. 当运营人员删除动态时，系统应同时删除关联的评论和互动记录
5. 当运营人员编辑动态时，系统应允许修改内容和分类字段

### 需求 3：分类管理

**用户故事:** 作为运营人员，我希望能够管理番剧分类，以便有效组织图库内容。

#### 验收标准

1. 当运营人员访问分类管理页面时，系统应显示所有分类，包含名称和封面图
2. 当运营人员创建新分类时，系统应要求分类名称唯一
3. 当运营人员编辑分类时，系统应允许修改名称和封面图URL
4. 如果运营人员尝试删除有关联动态的分类，系统应阻止删除并显示受影响的动态数量

### 需求 4：评论管理

**用户故事:** 作为运营人员，我希望能够管理评论，以便删除垃圾信息和不当内容。

#### 验收标准

1. 当运营人员访问评论管理页面时，系统应显示评论列表，包含内容、作者、关联动态和创建日期
2. 当运营人员搜索评论时，系统应支持按内容关键词或作者用户名筛选
3. 当运营人员删除评论时，系统应仅删除该评论，不影响父动态
4. 当运营人员查看评论时，系统应提供跳转到关联动态的链接

### 需求 5：管理员账户

**用户故事:** 作为超级管理员，我希望能够管理管理员账户，以便控制谁可以访问管理系统。

#### 验收标准

1. 当访问管理后台时，系统应要求使用管理员凭据进行身份验证
2. 当超级管理员创建管理员账户时，系统应使用 bcrypt 加密存储密码
3. 当管理员登录时，系统应创建会话并重定向到仪表盘
4. 当管理员会话过期时，系统应重定向到登录页面
5. 如果管理员角色是"运营人员"，系统应限制其访问用户删除和管理员管理功能

### 需求 6：仪表盘

**用户故事:** 作为运营人员，我希望在仪表盘上查看系统统计，以便一目了然地监控社区活动。

#### 验收标准

1. 当运营人员访问仪表盘时，系统应显示用户、动态、评论和互动的总数
2. 当运营人员查看仪表盘时，系统应显示最近的动态和新注册用户
3. 当运营人员查看仪表盘时，系统应显示今日活动摘要，包括新动态和评论数

### 需求 7：通知管理

**用户故事:** 作为运营人员，我希望能够管理通知，以便查看和清理通知记录。

#### 验收标准

1. 当运营人员访问通知页面时，系统应显示通知列表，包含类型、接收者、触发者和已读状态
2. 当运营人员筛选通知时，系统应支持按类型和已读状态筛选
3. 当运营人员删除通知时，系统应支持批量删除选中项

### 需求 8：外观设置

**用户故事:** 作为运营人员，我希望能够管理网站外观设置，以便无需编码即可自定义网站外观。

#### 验收标准

1. 当运营人员访问外观设置时，系统应显示 Logo、Favicon 和背景图片的配置选项
2. 当运营人员上传新 Logo 时，系统应验证图片格式并将 URL 存储到网站配置
3. 当运营人员更改背景图片时，系统应允许从已上传图片中选择或输入 URL
4. 当运营人员保存外观更改时，系统应立即更新配置，无需重启服务器

### 需求 9：内容设置

**用户故事:** 作为运营人员，我希望能够管理网站内容和文字标签，以便更新按钮名称、页面标题和描述。

#### 验收标准

1. 当运营人员访问内容设置时，系统应显示网站名称、描述和介绍文字的可编辑字段
2. 当运营人员编辑导航标签时，系统应允许自定义菜单项名称
3. 当运营人员编辑按钮标签时，系统应允许自定义操作按钮文字（如"发布"、"点赞"、"评论"）
4. 当运营人员保存内容更改时，系统应将值存储到配置表

### 需求 10：链接管理

**用户故事:** 作为运营人员，我希望能够管理外部链接和社交媒体，以便更新联系信息和社交链接。

#### 验收标准

1. 当运营人员访问链接设置时，系统应显示可配置的外部链接列表
2. 当运营人员添加新链接时，系统应要求填写名称、URL，并可选择图标
3. 当运营人员编辑链接顺序时，系统应支持拖拽排序
4. 当运营人员删除链接时，系统应将其从网站页脚/侧边栏移除

### 需求 11：媒体库

**用户故事:** 作为运营人员，我希望能够管理图库图片和横幅，以便更新推广内容和精选图片。

#### 验收标准

1. 当运营人员访问媒体库时，系统应显示所有已上传图片的缩略图预览
2. 当运营人员上传新图片时，系统应验证文件类型和大小，然后存储到上传目录
3. 当运营人员设置横幅图片时，系统应允许选择显示位置（首页、分类页等）
4. 当运营人员删除图片时，系统应检查是否在动态中使用，然后再允许删除

### 需求 12：数据报表

**用户故事:** 作为运营人员，我希望能够查看和导出数据报表，以便分析社区活动并做出决策。

#### 验收标准

1. 当运营人员访问报表页面时，系统应显示用户增长、动态活跃度和互动指标的图表
2. 当运营人员选择日期范围时，系统应将所有统计数据筛选到该时间段
3. 当运营人员点击导出时，系统应生成包含显示数据的 CSV 文件

### 需求 13：中文界面

**用户故事:** 作为运营人员，我希望管理后台是中文的，以便无语言障碍地使用。

#### 验收标准

1. 当运营人员访问任何管理页面时，系统应以中文显示所有标签、按钮和消息
2. 当运营人员查看模型名称时，系统应显示所有数据模型的中文名称
3. 当运营人员看到错误消息时，系统应以中文显示错误描述
