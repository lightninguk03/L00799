# 管理后台使用指南

## 访问管理后台

```
http://localhost:8000/admin
```

### 登录凭据
- 默认管理员账户: `admin`
- 默认密码: `Admin123`

### 创建新管理员
```bash
python init_admin.py 用户名 密码
# 或交互式创建
python init_admin.py
```

---

## 功能模块

### 用户管理
- 查看、搜索所有注册用户
- 编辑用户信息
- 封禁/解封用户

**封禁用户操作**：
1. 在用户列表找到目标用户，点击编辑
2. 勾选「已封禁」
3. 填写「封禁原因」
4. 可选填「封禁截止时间」（不填则永久封禁）
5. 保存

### 动态管理
- 查看所有动态
- 按分类、时间筛选
- 删除违规动态

### 分类管理
- 创建、编辑、删除番剧分类
- 设置分类封面图

### 评论管理
- 查看所有评论
- 删除违规评论

### 通知管理
- 查看系统通知
- 批量删除通知

### 媒体库
- 查看所有上传的图片和视频
- 获取图片路径用于配置

### 管理员管理（仅超级管理员）
- 查看所有管理员
- 创建新管理员
- 修改管理员角色

### 操作日志（仅超级管理员）
- 查看所有管理员操作记录
- 记录内容：操作人、操作类型、目标、IP地址、时间

---

## 网站配置

### 品牌信息

| 配置项 | 说明 | 示例值 |
|--------|------|--------|
| `site_name` | 网站名称 | `LETAVERSE` |
| `slogan` | 品牌标语(英文) | `The soul is infinite...` |
| `slogan_cn` | 品牌标语(中文) | `灵魂无限...` |

### AI 助手配置

| 配置项 | 说明 |
|--------|------|
| `ai_name` | AI名称(英文) |
| `ai_name_cn` | AI名称(中文) |
| `ai_title` | AI头衔(英文) |
| `ai_title_cn` | AI头衔(中文) |
| `ai_greeting` | AI欢迎语(英文) |
| `ai_greeting_cn` | AI欢迎语(中文) |
| `ai_system_prompt` | AI人设提示词 |

> 修改 `ai_system_prompt` 后立即生效，无需重启服务

### 视觉资源

| 配置项 | 说明 | 建议尺寸 |
|--------|------|----------|
| `logo` | 网站Logo | 任意尺寸，CSS控制 |
| `favicon` | 浏览器图标 | 32x32px |
| `background` | 全局背景图 | 1920x1080px |
| `hero_background` | 首页Hero背景 | 1920x1080px |
| `hero_banners` | 首页轮播图(JSON数组) | 1920x600px |
| `ai_kanban` | AI看板娘 | 透明PNG |
| `default_avatar` | 默认用户头像 | 200x200px |

**图片路径获取方式**：
1. 在前端发布动态上传图片，或直接上传到 `uploads/images/` 目录
2. 在「媒体库」找到图片，复制「文件路径」字段
3. 粘贴到配置项中，如 `/uploads/images/xxx.jpg`

### 轮播图配置

**方式一：通过 API 管理**
- `POST /banners/upload` - 上传轮播图
- `DELETE /banners/{index}` - 删除轮播图
- `PUT /banners/reorder` - 重新排序

**方式二：直接编辑配置**
在「网站配置」中找到 `hero_banners`，填入 JSON 数组：
```json
["/uploads/banners/banner1.jpg", "/uploads/banners/banner2.jpg"]
```

### 社交链接

在「网站配置」中找到 `social_links`，填入 JSON 格式：
```json
[
  {"name": "Instagram", "url": "https://instagram.com/xxx", "icon": "instagram"},
  {"name": "哔哩哔哩", "url": "https://space.bilibili.com/xxx", "icon": "bilibili"},
  {"name": "Discord", "url": "https://discord.gg/xxx", "icon": "discord"}
]
```

### 世界观数据库

在「网站配置」中找到 `world_database`，填入 JSON 格式：
```json
{
  "title": "World Database",
  "titleCn": "世界观数据库",
  "paragraphs": [
    {
      "title": "Reality Collapse",
      "titleCn": "现实崩塌",
      "content": "In a future timeline...",
      "contentCn": "在未来的时间线中..."
    }
  ],
  "cards": [
    {
      "title": "Gen-Z Creators",
      "titleCn": "Z世代创作者",
      "description": "...",
      "descriptionCn": "..."
    }
  ]
}
```

### 系统公告

在「网站配置」中找到 `announcement`，填入 JSON 格式：
```json
{
  "enabled": true,
  "type": "info",
  "title": "系统公告",
  "titleEn": "Announcement",
  "content": "欢迎来到闪电社区！",
  "contentEn": "Welcome!",
  "link": "/community",
  "linkText": "了解更多"
}
```

---

## 管理员角色

| 角色 | 说明 |
|------|------|
| `super_admin` | 超级管理员，所有权限 |
| `operator` | 运营人员，基础管理权限 |

---

## 前端 API

前端通过 `GET /system/config` 获取配置，返回格式：

```json
{
  "site_name": "LETAVERSE",
  "slogan": "...",
  "slogan_cn": "...",
  "logo": "/uploads/images/logo.png",
  "background": "/uploads/images/bg.jpg",
  "hero_background": "/uploads/images/hero.jpg",
  "hero_banners": ["/uploads/banners/banner1.jpg"],
  "ai_kanban": "/uploads/images/kanban.png",
  "ai": {
    "name": "Mu AI",
    "name_cn": "穆爱",
    "title": "Central Brain",
    "title_cn": "中枢脑",
    "greeting": "Hello~",
    "greeting_cn": "你好呀～"
  },
  "social_links": [...],
  "world_database": {...},
  "announcement": {...}
}
```

---

## 常见问题

### Q: 配置修改后前端没更新？
A: 前端需要刷新页面重新获取配置

### Q: 如何修改网站Logo？
A: 在「网站配置」中找到 `logo`，填入图片路径

### Q: 忘记管理员密码？
A: 运行 `python init_admin.py` 创建新管理员

### Q: 如何获取图片路径？
A: 在「媒体库」中查看图片详情，复制「文件路径」字段


